generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              Int        @id @default(autoincrement())
  email           String     @unique
  name            String
  username        String
  password        String
  picture         String?
  dateOfBirth     DateTime? @default(now())
  comments        Comment[]
  questions       Question[]
  favoriteArtists Artist[]   @relation("ArtistToUser")
  favoriteBrands  Brand[]    @relation("BrandToUser")
  cart            Cart[]  
  favList         Product[]  @relation("favList")
}

model Artist {
  id          Int       @id @default(autoincrement())
  email       String    @unique
  name        String
  username    String
  password    String
  bio         String?
  profilePic  String?
  coverPic    String?
  dateOfBirth DateTime?
  posts       Post[]
  followers   User[]    @relation("ArtistToUser")
}

model Post {
  id       Int       @id @default(autoincrement())
  content  String
  picture  String
  artistId Int
  comments Comment[]
  artist   Artist    @relation(fields: [artistId], references: [id])
}

model Brand {
  id          Int          @id @default(autoincrement())
  name        String
  picture     String
  collections Collection[]
  followers   User[]       @relation("BrandToUser")
}

model Collection {
  id       Int       @id @default(autoincrement())
  name     String
  brandId  Int
  brand    Brand     @relation(fields: [brandId], references: [id])
  products Product[]
}

model Product {
  id           Int        @id @default(autoincrement())
  name         String
  price        Float
  isNew        Boolean    @default(true)
  pictures     String[]
  collectionId Int
  category String
  collection   Collection @relation(fields: [collectionId], references: [id])
  cart      Cart[]    
  users        User[]     @relation("favList")
}

model Question {
  id       Int    @id @default(autoincrement())
  question String
  userId   Int
  user     User   @relation(fields: [userId], references: [id])
}

model Comment {
  id      Int    @id @default(autoincrement())
  content String
  userId  Int
  postId  Int
  post    Post   @relation(fields: [postId], references: [id])
  user    User   @relation(fields: [userId], references: [id])
}

model Cart {
  id Int @id @default(autoincrement())
  userId Int
  productId Int
  user User  @relation(fields: [userId], references: [id])
  product Product  @relation(fields: [productId], references: [id])
} 